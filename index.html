<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Room Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .date-selector {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .date-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .date-controls input, .date-controls button {
            padding: 12px 20px;
            border: 2px solid #3498db;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .date-controls input {
            background: white;
            color: #333;
        }

        .date-controls button {
            background: #3498db;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }

        .date-controls button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .form-group h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .room-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25d366, #128c7e);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }

        .data-display {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .data-display h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .data-entry {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #27ae60;
        }

        .data-entry h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .data-entry p {
            margin-bottom: 8px;
            color: #34495e;
        }

        .data-entry strong {
            color: #2c3e50;
        }

        .no-data {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .date-controls {
                flex-direction: column;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè® Hotel Room Management System</h1>
            <p>Manage daily room status and occupancy data</p>
        </div>

        <div class="date-selector">
            <div class="date-controls">
                <input type="date" id="selectedDate" />
                <button onclick="loadToday()">Today</button>
                <button onclick="loadYesterday()">Yesterday</button>
                <button onclick="loadData()">Load Data</button>
            </div>
        </div>

        <div class="form-container">
            <div class="form-grid">
                <div class="form-group">
                    <h3>üìä Basic Information</h3>
                    <label for="totalRooms">Total Number of Rooms:</label>
                    <input type="number" id="totalRooms" value="24" />
                    
                    <label for="checkIn">Total Check-ins:</label>
                    <input type="number" id="checkIn" value="0" />
                    
                    <label for="checkOut">Total Check-outs:</label>
                    <input type="number" id="checkOut" value="0" />
                </div>

                <div class="form-group">
                    <h3>üîÑ Room Operations</h3>
                    <label for="roomShifting">Room Shifting:</label>
                    <input type="text" id="roomShifting" placeholder="Enter room shifting details or 'Nil'" />
                    
                    <label for="lateCheckIn">Late Check-in:</label>
                    <input type="text" id="lateCheckIn" placeholder="Enter late check-in details or 'Nil'" />
                    
                    <label for="stayBack">Stay Back:</label>
                    <input type="text" id="stayBack" placeholder="e.g., RFV Room No:7,8,9" />
                </div>

                <div class="form-group">
                    <h3>üîß Maintenance & Occupancy</h3>
                    <label for="underMaintenance">Under Maintenance:</label>
                    <input type="text" id="underMaintenance" placeholder="Enter maintenance details or 'Nil'" />
                    
                    <label for="todaysClosing">Today's Closing:</label>
                    <input type="text" id="todaysClosing" placeholder="e.g., 7 (20pax)" />
                    
                    <label for="yesterdaysClosing">Yesterday's Closing:</label>
                    <input type="number" id="yesterdaysClosing" value="0" />
                </div>

                <div class="form-group">
                    <h3>üïê Early Check-in Available</h3>
                    <label for="earlyCheckIn">Rooms Available for Early Check-in:</label>
                    <textarea id="earlyCheckIn" placeholder="List rooms available for early check-in or 'Nil'"></textarea>
                </div>
            </div>

            <div class="form-group">
                <h3>üè® Today's Guest Stay Details</h3>
                <div id="guestStayContainer">
                    <div class="guest-entry">
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <input type="text" placeholder="Guest Name & Location" class="guest-name" />
                            <input type="text" placeholder="Contact Number" class="guest-contact" />
                            <input type="number" placeholder="Pax" class="guest-pax" min="1" />
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <input type="text" placeholder="Booking Contact" class="guest-booking" />
                            <input type="text" placeholder="Room Assigned" class="guest-room" />
                            <input type="text" placeholder="Arrival Time" class="guest-arrival" />
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addGuestEntry()" style="background: #27ae60; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">+ Add Guest</button>
            </div>

            <div class="form-group">
                <h3>üçΩÔ∏è Yesterday's Stay for Lunch</h3>
                <div id="lunchStayContainer">
                    <div class="lunch-entry">
                        <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 10px; margin-bottom: 10px;">
                            <input type="text" placeholder="Guest Name" class="lunch-name" />
                            <input type="number" placeholder="Pax" class="lunch-pax" min="1" />
                            <input type="text" placeholder="Room & Booking Contact" class="lunch-room-contact" />
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addLunchEntry()" style="background: #e67e22; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">+ Add Lunch Guest</button>
            </div>

            <div class="form-group">
                <h3>üè† Rooms Available Today (After Check-out)</h3>
                <div class="room-checkboxes">
                    <!-- Red Fort Villa Rooms 7-14 -->
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort7" />
                        <label for="redFort7">Red Fort Villa Room 7</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort8" />
                        <label for="redFort8">Red Fort Villa Room 8</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort9" />
                        <label for="redFort9">Red Fort Villa Room 9</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort10" />
                        <label for="redFort10">Red Fort Villa Room 10</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort11" />
                        <label for="redFort11">Red Fort Villa Room 11</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort12" />
                        <label for="redFort12">Red Fort Villa Room 12</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort13" />
                        <label for="redFort13">Red Fort Villa Room 13</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="redFort14" />
                        <label for="redFort14">Red Fort Villa Room 14</label>
                    </div>
                    
                    <!-- Nalukettu Rooms 1-6 -->
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu1" />
                        <label for="nalukettu1">Nalukettu Room 1</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu2" />
                        <label for="nalukettu2">Nalukettu Room 2</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu3" />
                        <label for="nalukettu3">Nalukettu Room 3</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu4" />
                        <label for="nalukettu4">Nalukettu Room 4</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu5" />
                        <label for="nalukettu5">Nalukettu Room 5</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nalukettu6" />
                        <label for="nalukettu6">Nalukettu Room 6</label>
                    </div>
                    
                    <!-- Other Rooms -->
                    <div class="checkbox-item">
                        <input type="checkbox" id="familyHall" />
                        <label for="familyHall">Family Hall</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="familyRoom5" />
                        <label for="familyRoom5">Family Room 5</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="familyRoom6" />
                        <label for="familyRoom6">Family Room 6</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="familyHall2" />
                        <label for="familyHall2">Family Hall Room 2</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="familyHall3" />
                        <label for="familyHall3">Family Hall Room 3</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="bambooHut1" />
                        <label for="bambooHut1">Bamboo Hut Room 1</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="bambooHut2" />
                        <label for="bambooHut2">Bamboo Hut Room 2</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="homestay" />
                        <label for="homestay">Homestay</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="mangoVilla" />
                        <label for="mangoVilla">Mango Villa</label>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="saveData()">üíæ Save Data</button>
                <button class="btn btn-secondary" onclick="clearForm()">üóëÔ∏è Clear Form</button>
                <button class="btn btn-success" onclick="exportData()">üì§ Export Data</button>
                <button class="btn btn-whatsapp" onclick="sendWhatsApp()">üì± Send WhatsApp</button>
                <button class="btn btn-secondary" onclick="copyWhatsAppMessage()">üìã Copy Message</button>
            </div>
        </div>

        <div class="form-container" style="margin-top: 20px;">
            <div class="form-group">
                <h3>üì± WhatsApp Settings</h3>
                <label for="whatsappNumber">WhatsApp Number (with country code):</label>
                <input type="tel" id="whatsappNumber" placeholder="e.g., 919876543210" />
                <small style="color: #7f8c8d; display: block; margin-top: 5px;">
                    Enter phone number with country code (e.g., 91 for India)
                </small>
            </div>
        </div>

        <div class="data-display">
            <h2>üìÖ Saved Data Records</h2>
            <div id="dataDisplay">
                <div class="no-data">No data saved yet. Save some data to see it here.</div>
            </div>
        </div>
    </div>

    <script>
        // Initialize with today's date
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('selectedDate').value = today;

        // Data storage
        let hotelData = {};

        function addGuestEntry() {
            const container = document.getElementById('guestStayContainer');
            const newEntry = document.createElement('div');
            newEntry.className = 'guest-entry';
            newEntry.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <input type="text" placeholder="Guest Name & Location" class="guest-name" />
                    <input type="text" placeholder="Contact Number" class="guest-contact" />
                    <input type="number" placeholder="Pax" class="guest-pax" min="1" />
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <input type="text" placeholder="Booking Contact" class="guest-booking" />
                    <input type="text" placeholder="Room Assigned" class="guest-room" />
                    <input type="text" placeholder="Arrival Time" class="guest-arrival" />
                </div>
                <button type="button" onclick="removeGuestEntry(this)" style="background: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Remove</button>
                <hr style="margin: 15px 0; border: 1px solid #eee;">
            `;
            container.appendChild(newEntry);
        }

        function removeGuestEntry(button) {
            button.parentElement.remove();
        }

        function addLunchEntry() {
            const container = document.getElementById('lunchStayContainer');
            const newEntry = document.createElement('div');
            newEntry.className = 'lunch-entry';
            newEntry.innerHTML = `
                <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 10px; margin-bottom: 10px;">
                    <input type="text" placeholder="Guest Name" class="lunch-name" />
                    <input type="number" placeholder="Pax" class="lunch-pax" min="1" />
                    <input type="text" placeholder="Room & Booking Contact" class="lunch-room-contact" />
                </div>
                <button type="button" onclick="removeLunchEntry(this)" style="background: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Remove</button>
                <hr style="margin: 15px 0; border: 1px solid #eee;">
            `;
            container.appendChild(newEntry);
        }

        function removeLunchEntry(button) {
            button.parentElement.remove();
        }

        function loadToday() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('selectedDate').value = today;
            loadData();
        }

        function loadYesterday() {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            document.getElementById('selectedDate').value = yesterday.toISOString().split('T')[0];
            loadData();
        }

        function loadData() {
            const selectedDate = document.getElementById('selectedDate').value;
            if (!selectedDate) {
                alert('Please select a date first!');
                return;
            }

            const data = hotelData[selectedDate];
            if (data) {
                // Load form data
                document.getElementById('totalRooms').value = data.totalRooms || 24;
                document.getElementById('checkIn').value = data.checkIn || 0;
                document.getElementById('checkOut').value = data.checkOut || 0;
                document.getElementById('roomShifting').value = data.roomShifting || '';
                document.getElementById('lateCheckIn').value = data.lateCheckIn || '';
                document.getElementById('stayBack').value = data.stayBack || '';
                document.getElementById('underMaintenance').value = data.underMaintenance || '';
                document.getElementById('todaysClosing').value = data.todaysClosing || '';
                document.getElementById('yesterdaysClosing').value = data.yesterdaysClosing || 0;
                document.getElementById('earlyCheckIn').value = data.earlyCheckIn || '';

                // Load room checkboxes
                const rooms = data.availableRooms || [];
                document.querySelectorAll('.room-checkboxes input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = rooms.includes(checkbox.id);
                });

                // Load guest stays
                const guestContainer = document.getElementById('guestStayContainer');
                guestContainer.innerHTML = '';
                if (data.guestStays && data.guestStays.length > 0) {
                    data.guestStays.forEach(guest => {
                        const entry = document.createElement('div');
                        entry.className = 'guest-entry';
                        entry.innerHTML = `
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Guest Name & Location" class="guest-name" value="${guest.name || ''}" />
                                <input type="text" placeholder="Contact Number" class="guest-contact" value="${guest.contact || ''}" />
                                <input type="number" placeholder="Pax" class="guest-pax" min="1" value="${guest.pax || ''}" />
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Booking Contact" class="guest-booking" value="${guest.booking || ''}" />
                                <input type="text" placeholder="Room Assigned" class="guest-room" value="${guest.room || ''}" />
                                <input type="text" placeholder="Arrival Time" class="guest-arrival" value="${guest.arrival || ''}" />
                            </div>
                            <button type="button" onclick="removeGuestEntry(this)" style="background: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Remove</button>
                            <hr style="margin: 15px 0; border: 1px solid #eee;">
                        `;
                        guestContainer.appendChild(entry);
                    });
                } else {
                    guestContainer.innerHTML = `
                        <div class="guest-entry">
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Guest Name & Location" class="guest-name" />
                                <input type="text" placeholder="Contact Number" class="guest-contact" />
                                <input type="number" placeholder="Pax" class="guest-pax" min="1" />
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Booking Contact" class="guest-booking" />
                                <input type="text" placeholder="Room Assigned" class="guest-room" />
                                <input type="text" placeholder="Arrival Time" class="guest-arrival" />
                            </div>
                        </div>
                    `;
                }

                // Load lunch stays
                const lunchContainer = document.getElementById('lunchStayContainer');
                lunchContainer.innerHTML = '';
                if (data.lunchStays && data.lunchStays.length > 0) {
                    data.lunchStays.forEach(lunch => {
                        const entry = document.createElement('div');
                        entry.className = 'lunch-entry';
                        entry.innerHTML = `
                            <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Guest Name" class="lunch-name" value="${lunch.name || ''}" />
                                <input type="number" placeholder="Pax" class="lunch-pax" min="1" value="${lunch.pax || ''}" />
                                <input type="text" placeholder="Room & Booking Contact" class="lunch-room-contact" value="${lunch.roomContact || ''}" />
                            </div>
                            <button type="button" onclick="removeLunchEntry(this)" style="background: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Remove</button>
                            <hr style="margin: 15px 0; border: 1px solid #eee;">
                        `;
                        lunchContainer.appendChild(entry);
                    });
                } else {
                    lunchContainer.innerHTML = `
                        <div class="lunch-entry">
                            <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Guest Name" class="lunch-name" />
                                <input type="number" placeholder="Pax" class="lunch-pax" min="1" />
                                <input type="text" placeholder="Room & Booking Contact" class="lunch-room-contact" />
                            </div>
                        </div>
                    `;
                }

                alert(`Data loaded for ${selectedDate}`);
            } else {
                clearForm();
                alert(`No data found for ${selectedDate}. Form cleared for new entry.`);
            }
        }

        function saveData() {
            const selectedDate = document.getElementById('selectedDate').value;
            if (!selectedDate) {
                alert('Please select a date first!');
                return;
            }

            // Get available rooms
            const availableRooms = [];
            document.querySelectorAll('.room-checkboxes input[type="checkbox"]:checked').forEach(checkbox => {
                availableRooms.push(checkbox.id);
            });

            // Get guest stay details
            const guestStays = [];
            document.querySelectorAll('.guest-entry').forEach(entry => {
                const guestName = entry.querySelector('.guest-name')?.value.trim();
                const guestContact = entry.querySelector('.guest-contact')?.value.trim();
                const guestPax = entry.querySelector('.guest-pax')?.value.trim();
                const guestBooking = entry.querySelector('.guest-booking')?.value.trim();
                const guestRoom = entry.querySelector('.guest-room')?.value.trim();
                const guestArrival = entry.querySelector('.guest-arrival')?.value.trim();
                
                if (guestName || guestContact || guestPax || guestBooking || guestRoom || guestArrival) {
                    guestStays.push({
                        name: guestName,
                        contact: guestContact,
                        pax: guestPax,
                        booking: guestBooking,
                        room: guestRoom,
                        arrival: guestArrival
                    });
                }
            });

            // Get lunch stay details
            const lunchStays = [];
            document.querySelectorAll('.lunch-entry').forEach(entry => {
                const lunchName = entry.querySelector('.lunch-name')?.value.trim();
                const lunchPax = entry.querySelector('.lunch-pax')?.value.trim();
                const lunchRoomContact = entry.querySelector('.lunch-room-contact')?.value.trim();
                
                if (lunchName || lunchPax || lunchRoomContact) {
                    lunchStays.push({
                        name: lunchName,
                        pax: lunchPax,
                        roomContact: lunchRoomContact
                    });
                }
            });

            // Create data object
            const data = {
                totalRooms: parseInt(document.getElementById('totalRooms').value) || 24,
                checkIn: parseInt(document.getElementById('checkIn').value) || 0,
                checkOut: parseInt(document.getElementById('checkOut').value) || 0,
                roomShifting: document.getElementById('roomShifting').value || 'Nil',
                lateCheckIn: document.getElementById('lateCheckIn').value || 'Nil',
                stayBack: document.getElementById('stayBack').value || 'Nil',
                underMaintenance: document.getElementById('underMaintenance').value || 'Nil',
                todaysClosing: document.getElementById('todaysClosing').value || '0',
                yesterdaysClosing: parseInt(document.getElementById('yesterdaysClosing').value) || 0,
                earlyCheckIn: document.getElementById('earlyCheckIn').value || 'Nil',
                availableRooms: availableRooms,
                guestStays: guestStays,
                lunchStays: lunchStays,
                savedAt: new Date().toISOString()
            };

            hotelData[selectedDate] = data;
            displayData();
            alert(`Data saved successfully for ${selectedDate}!`);
        }

        function clearForm() {
            document.getElementById('totalRooms').value = 24;
            document.getElementById('checkIn').value = 0;
            document.getElementById('checkOut').value = 0;
            document.getElementById('roomShifting').value = '';
            document.getElementById('lateCheckIn').value = '';
            document.getElementById('stayBack').value = '';
            document.getElementById('underMaintenance').value = '';
            document.getElementById('todaysClosing').value = '';
            document.getElementById('yesterdaysClosing').value = 0;
            document.getElementById('earlyCheckIn').value = '';
            
            document.querySelectorAll('.room-checkboxes input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            // Clear guest stays
            const guestContainer = document.getElementById('guestStayContainer');
            guestContainer.innerHTML = `
                <div class="guest-entry">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <input type="text" placeholder="Guest Name & Location" class="guest-name" />
                        <input type="text" placeholder="Contact Number" class="guest-contact" />
                        <input type="number" placeholder="Pax" class="guest-pax" min="1" />
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <input type="text" placeholder="Booking Contact" class="guest-booking" />
                        <input type="text" placeholder="Room Assigned" class="guest-room" />
                        <input type="text" placeholder="Arrival Time" class="guest-arrival" />
                    </div>
                </div>
            `;

            // Clear lunch stays
            const lunchContainer = document.getElementById('lunchStayContainer');
            lunchContainer.innerHTML = `
                <div class="lunch-entry">
                    <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 10px; margin-bottom: 10px;">
                        <input type="text" placeholder="Guest Name" class="lunch-name" />
                        <input type="number" placeholder="Pax" class="lunch-pax" min="1" />
                        <input type="text" placeholder="Room & Booking Contact" class="lunch-room-contact" />
                    </div>
                </div>
            `;
        }

        function displayData() {
            const displayDiv = document.getElementById('dataDisplay');
            const dates = Object.keys(hotelData).sort().reverse();

            if (dates.length === 0) {
                displayDiv.innerHTML = '<div class="no-data">No data saved yet. Save some data to see it here.</div>';
                return;
            }

            let html = '';
            dates.forEach(date => {
                const data = hotelData[date];
                const roomLabels = {
                    'redFort7': 'Red Fort Villa Room 7',
                    'redFort8': 'Red Fort Villa Room 8',
                    'redFort9': 'Red Fort Villa Room 9',
                    'redFort10': 'Red Fort Villa Room 10',
                    'redFort11': 'Red Fort Villa Room 11',
                    'redFort12': 'Red Fort Villa Room 12',
                    'redFort13': 'Red Fort Villa Room 13',
                    'redFort14': 'Red Fort Villa Room 14',
                    'nalukettu1': 'Nalukettu Room 1',
                    'nalukettu2': 'Nalukettu Room 2',
                    'nalukettu3': 'Nalukettu Room 3',
                    'nalukettu4': 'Nalukettu Room 4',
                    'nalukettu5': 'Nalukettu Room 5',
                    'nalukettu6': 'Nalukettu Room 6',
                    'familyHall': 'Family Hall',
                    'familyRoom5': 'Family Room 5',
                    'familyRoom6': 'Family Room 6',
                    'familyHall2': 'Family Hall Room 2',
                    'familyHall3': 'Family Hall Room 3',
                    'bambooHut1': 'Bamboo Hut Room 1',
                    'bambooHut2': 'Bamboo Hut Room 2',
                    'homestay': 'Homestay',
                    'mangoVilla': 'Mango Villa'
                };

                const availableRoomNames = data.availableRooms.map(id => roomLabels[id] || id).join(', ') || 'None';

                // Format guest stays for display
                let guestStaysDisplay = '';
                if (data.guestStays && data.guestStays.length > 0) {
                    guestStaysDisplay = data.guestStays.map((guest, index) => 
                        `${index + 1}. ${guest.name || 'N/A'} - ${guest.pax || 'N/A'} pax\n   Contact: ${guest.contact || 'N/A'}\n   Booking: ${guest.booking || 'N/A'}\n   Room: ${guest.room || 'N/A'}\n   Arrival: ${guest.arrival || 'N/A'}`
                    ).join('\n\n');
                } else {
                    guestStaysDisplay = 'No guest stays recorded';
                }

                // Format lunch stays for display
                let lunchStaysDisplay = '';
                if (data.lunchStays && data.lunchStays.length > 0) {
                    lunchStaysDisplay = data.lunchStays.map((lunch, index) => 
                        `${index + 1}. ${lunch.name || 'N/A'} - ${lunch.pax || 'N/A'} pax\n   ${lunch.roomContact || 'N/A'}`
                    ).join('\n\n');
                } else {
                    lunchStaysDisplay = 'No lunch stays recorded';
                }

                html += `
                    <div class="data-entry">
                        <h3>${new Date(date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</h3>
                        <p><strong>Total Rooms:</strong> ${data.totalRooms}</p>
                        <p><strong>Check-ins:</strong> ${data.checkIn} | <strong>Check-outs:</strong> ${data.checkOut}</p>
                        <p><strong>Room Shifting:</strong> ${data.roomShifting}</p>
                        <p><strong>Late Check-in:</strong> ${data.lateCheckIn}</p>
                        <p><strong>Stay Back:</strong> ${data.stayBack}</p>
                        <p><strong>Under Maintenance:</strong> ${data.underMaintenance}</p>
                        <p><strong>Today's Closing:</strong> ${data.todaysClosing}</p>
                        <p><strong>Yesterday's Closing:</strong> ${data.yesterdaysClosing}</p>
                        <p><strong>Early Check-in Available:</strong> ${data.earlyCheckIn}</p>
                        <p><strong>Available Rooms:</strong> ${availableRoomNames}</p>
                        <div style="margin-top: 15px;">
                            <p><strong>Today's Guest Stays:</strong></p>
                            <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-size: 12px; white-space: pre-wrap;">${guestStaysDisplay}</pre>
                        </div>
                        <div style="margin-top: 15px;">
                            <p><strong>Yesterday's Lunch Stays:</strong></p>
                            <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-size: 12px; white-space: pre-wrap;">${lunchStaysDisplay}</pre>
                        </div>
                        <p><em>Saved on: ${new Date(data.savedAt).toLocaleString()}</em></p>
                    </div>
                `;
            });

            displayDiv.innerHTML = html;
        }

        function exportData() {
            if (Object.keys(hotelData).length === 0) {
                alert('No data to export!');
                return;
            }

            const exportData = JSON.stringify(hotelData, null, 2);
            const blob = new Blob([exportData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `hotel-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function formatWhatsAppMessage() {
            const selectedDate = document.getElementById('selectedDate').value;
            if (!selectedDate) {
                alert('Please select a date first!');
                return null;
            }

            // Get current form data
            const totalRooms = document.getElementById('totalRooms').value || '24';
            const checkIn = document.getElementById('checkIn').value || '0';
            const checkOut = document.getElementById('checkOut').value || '0';
            const roomShifting = document.getElementById('roomShifting').value || 'Nil';
            const lateCheckIn = document.getElementById('lateCheckIn').value || 'Nil';
            const stayBack = document.getElementById('stayBack').value || 'Nil';
            const underMaintenance = document.getElementById('underMaintenance').value || 'Nil';
            const todaysClosing = document.getElementById('todaysClosing').value || '0';
            const yesterdaysClosing = document.getElementById('yesterdaysClosing').value || '0';
            const earlyCheckIn = document.getElementById('earlyCheckIn').value || 'Nil';

            // Get selected available rooms
            const availableRooms = [];
            const roomLabels = {
                'redFort7': 'Red Fort Villa Room 7',
                'redFort8': 'Red Fort Villa Room 8',
                'redFort9': 'Red Fort Villa Room 9',
                'redFort10': 'Red Fort Villa Room 10',
                'redFort11': 'Red Fort Villa Room 11',
                'redFort12': 'Red Fort Villa Room 12',
                'redFort13': 'Red Fort Villa Room 13',
                'redFort14': 'Red Fort Villa Room 14',
                'nalukettu1': 'Nalukettu Room 1',
                'nalukettu2': 'Nalukettu Room 2',
                'nalukettu3': 'Nalukettu Room 3',
                'nalukettu4': 'Nalukettu Room 4',
                'nalukettu5': 'Nalukettu Room 5',
                'nalukettu6': 'Nalukettu Room 6',
                'familyHall': 'Family Hall',
                'familyRoom5': 'Family Room 5',
                'familyRoom6': 'Family Room 6',
                'familyHall2': 'Family Hall Room 2',
                'familyHall3': 'Family Hall Room 3',
                'bambooHut1': 'Bamboo Hut Room 1',
                'bambooHut2': 'Bamboo Hut Room 2',
                'homestay': 'Homestay',
                'mangoVilla': 'Mango Villa'
            };

            document.querySelectorAll('.room-checkboxes input[type="checkbox"]:checked').forEach(checkbox => {
                availableRooms.push(roomLabels[checkbox.id] || checkbox.id);
            });

            const availableRoomsText = availableRooms.length > 0 ? availableRooms.join('\n') : 'Nil';

            // Format guest stays for WhatsApp
            let guestStaysText = '';
            const guestStayData = [];
            document.querySelectorAll('.guest-entry').forEach((entry, index) => {
                const guestName = entry.querySelector('.guest-name')?.value.trim();
                const guestContact = entry.querySelector('.guest-contact')?.value.trim();
                const guestPax = entry.querySelector('.guest-pax')?.value.trim();
                const guestBooking = entry.querySelector('.guest-booking')?.value.trim();
                const guestRoom = entry.querySelector('.guest-room')?.value.trim();
                const guestArrival = entry.querySelector('.guest-arrival')?.value.trim();
                
                if (guestName || guestContact || guestPax || guestBooking || guestRoom || guestArrival) {
                    guestStayData.push(`${index + 1}. ${guestName || 'N/A'}- ${guestPax || 'N/A'}pax
${guestContact || 'N/A'}
*${guestBooking || 'N/A'}*
  *${guestRoom || 'N/A'}* 
 *${guestArrival || 'N/A'}*`);
                }
            });
            guestStaysText = guestStayData.length > 0 ? guestStayData.join('\n\n') : 'Nil';

            // Format lunch stays for WhatsApp
            let lunchStaysText = '';
            const lunchStayData = [];
            document.querySelectorAll('.lunch-entry').forEach((entry, index) => {
                const lunchName = entry.querySelector('.lunch-name')?.value.trim();
                const lunchPax = entry.querySelector('.lunch-pax')?.value.trim();
                const lunchRoomContact = entry.querySelector('.lunch-room-contact')?.value.trim();
                
                if (lunchName || lunchPax || lunchRoomContact) {
                    lunchStayData.push(`${index + 1}. ${lunchName || 'N/A'}- ${lunchPax || 'N/A'}pax
*${lunchRoomContact || 'N/A'}*`);
                }
            });
            lunchStaysText = lunchStayData.length > 0 ? lunchStayData.join('\n\n') : 'Nil';

            // Format date
            const dateObj = new Date(selectedDate);
            const formattedDate = dateObj.toLocaleDateString('en-GB', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric' 
            });
            const dayName = dateObj.toLocaleDateString('en-US', { weekday: 'long' }).toUpperCase();

            // Create WhatsApp message
            const message = `*${formattedDate} *${dayName}*

üè® *HOTEL DAILY REPORT*

üìä *ROOM STATISTICS:*
‚Ä¢ Total No. of Rooms: *${totalRooms}*
‚Ä¢ Total No. of Check-in: *${checkIn}*
‚Ä¢ Total No. of Check-out: *${checkOut}*

üîÑ *OPERATIONS:*
‚Ä¢ Room Shifting: *${roomShifting}*
‚Ä¢ Late Check-in: *${lateCheckIn}*
‚Ä¢ Stay Back: *${stayBack}*
‚Ä¢ Under Maintenance: *${underMaintenance}*

üìà *OCCUPANCY:*
‚Ä¢ Today's Closing: *${todaysClosing}*
‚Ä¢ Yesterday's Closing: *${yesterdaysClosing}*

üïê *ROOMS AVAILABLE FOR EARLY CHECK-IN:*
${earlyCheckIn}

üè† *ROOMS AVAILABLE FOR TODAY (AFTER CHECK OUT):*
${availableRoomsText}

üè® *TODAY'S STAY DETAILS:*
${guestStaysText}

üçΩÔ∏è *YESTERDAY'S STAY FOR LUNCH:*
${lunchStaysText}

---
Generated on: ${new Date().toLocaleString()}`;*
‚Ä¢ Total No. of Check-out: *${checkOut}*

üîÑ *OPERATIONS:*
‚Ä¢ Room Shifting: *${roomShifting}*
‚Ä¢ Late Check-in: *${lateCheckIn}*
‚Ä¢ Stay Back: *${stayBack}*
‚Ä¢ Under Maintenance: *${underMaintenance}*

üìà *OCCUPANCY:*
‚Ä¢ Today's Closing: *${todaysClosing}*
‚Ä¢ Yesterday's Closing: *${yesterdaysClosing}*

üïê *ROOMS AVAILABLE FOR EARLY CHECK-IN:*
${earlyCheckIn}

üè† *ROOMS AVAILABLE FOR TODAY (AFTER CHECK OUT):*
${availableRoomsText}

---
Generated on: ${new Date().toLocaleString()}`;

            return message;
        }

        function sendWhatsApp() {
            const message = formatWhatsAppMessage();
            if (!message) return;

            const whatsappNumber = document.getElementById('whatsappNumber').value.trim();
            
            if (whatsappNumber) {
                // Send to specific number
                const cleanNumber = whatsappNumber.replace(/[^0-9]/g, '');
                const whatsappURL = `https://wa.me/${cleanNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappURL, '_blank');
            } else {
                // Open WhatsApp with message (user can choose contact)
                const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
                window.open(whatsappURL, '_blank');
            }
        }

        function copyWhatsAppMessage() {
            const message = formatWhatsAppMessage();
            if (!message) return;

            navigator.clipboard.writeText(message).then(() => {
                alert('Message copied to clipboard! You can paste it in WhatsApp.');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = message;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Message copied to clipboard! You can paste it in WhatsApp.');
            });
        }

        // Initialize display
        displayData();
    </script>
</body>
</html>
